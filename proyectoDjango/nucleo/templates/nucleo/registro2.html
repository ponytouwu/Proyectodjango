<!DOCTYPE html>
<html lang="en">
    {% load static %}
    <head>
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
        <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
        <link rel="icon" type="gif" href="{% static 'nucleo/imagenes/tenor.gif' %}">
        <link type="text/css" rel="stylesheet" href="{% static 'nucleo/css/estilos.css' %}">
        <script src="//cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <title>Registro </title>

        <style type="text/css">
            body{
                top: 0 !important;
            }
            .goog-te-banner-frame{
                display: none;
            }
            </style>
        
        <style>
      body {
        background-image: url("{% static 'nucleo/imagenes/fondoprueba3.png' %}");
        background-repeat: repeat;
        background-color: rgba(209, 209, 171, 0.473);
    }
        </style>

        <script type="text/javascript">
            $(document).ready(function(){
                var input=  document.getElementById('postal');
                input.addEventListener('input',function(){
                if (this.value.length > 7) 
                this.value = this.value.slice(0,7); 
                })

                var input=  document.getElementById('telefono');
                input.addEventListener('input',function(){
                if (this.value.length > 9) 
                this.value = this.value.slice(0,9); 
                })

                
                $("#mensaje_error").hide(); //Estoy ocultando el div
                $("#formulario_contacto").submit(function(){
                var mensaje = "Debes Solucionar los errores para poder Registrarte";

                if($("#usuario").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Nombre Usuario no puede estar vacio";
                }

                if($("#contraseña").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Contraseña no puede estar vacio";
                }

                if($("#contraseña").val().trim().length < 10){
                    mensaje = mensaje + "<br>El campo Contraseña debe tener al menos 10 caracteres";
                }

                if($("#nombre").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Nombre Completo no puede estar vacio";
                }
                
                if(isNaN($("#telefono").val())){
                    mensaje = mensaje + "<br>El teléfono solo puede contener números";
                }
                if($("#telefono").val().trim().length < 9){
                    mensaje = mensaje + "<br>El campo telefono debe de ser de un largo de 9 caracteres";
                }

                if($("#ciudad").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Ciudad no puede estar vacio";
                }

                if($("#direccion").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Direccion no puede estar vacio";
                }

                if($("#postal").val().trim().length == 0){
                    mensaje = mensaje + "<br>El campo Postal no puede estar vacio";
                }

                if(mensaje != "Debes Solucionar los errores para poder Registrarte"){
                    $("#mensaje_error").html(mensaje); //mostrando el texto de la variable en el div
                    $("#mensaje_error").show(); //haciendo visible mi div
                    event.preventDefault(); //evito que el formulario se envie
                }


            });

            $("#nombre").keypress(function (key) {
                window.console.log(key.charCode)
            if ((key.charCode < 97 || key.charCode > 122)//letras mayusculas
                && (key.charCode < 65 || key.charCode > 90) //letras minusculas
                && (key.charCode != 45) //retroceso
                && (key.charCode != 241) //ñ
                 && (key.charCode != 209) //Ñ
                 && (key.charCode != 32) //espacio
                 && (key.charCode != 225) //á
                 && (key.charCode != 233) //é
                 && (key.charCode != 237) //í
                 && (key.charCode != 243) //ó
                 && (key.charCode != 250) //ú
                 && (key.charCode != 193) //Á
                 && (key.charCode != 201) //É
                 && (key.charCode != 205) //Í
                 && (key.charCode != 211) //Ó
                 && (key.charCode != 218) //Ú
 
                )
                return false;
        });
            });

            document.getElementById('hablar').addEventListener("click",()=>{
         decir(document.getElementById("texto").value);
        });

        function decir(texto){
         speechSynthesis.speak(new SpeechSynthesisUtterance(texto));
            }

        </script>
    </head>
<body>
    <form action="" class="form formulario_reg" method="POST">
        {% csrf_token %}
        {% if messages %}
            {% for m in messages%}
                <script>
                    Swal.fire({
                        "title" : "felicitaciones",
                        "text" : "{{m}}",
                        "icon" : "success"
                    })
                </script>
            {% endfor %}
        {% endif %}
        {{ form.as_p}}
        <button type="submit" id="submit">Registrarse</button>
    </form>
</body>
</html>